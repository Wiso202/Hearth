<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cr√©er votre Instant | L'Instant</title>
    <link rel="stylesheet" href="assets/css/global.css">
    <link rel="stylesheet" href="assets/css/create.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;1,700&family=Inter:wght@300;400;600&family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
</head>
<body>

    <div class="progress-bar"><div id="progress"></div></div>

    <main class="create-container">
        <form id="love-form">
            <section class="step active" data-step="1">
                <span class="step-number">01</span>
                <h2>Comment tout a commenc√© ?</h2>
                <p>Une petite phrase sur votre rencontre ou ce que tu as ressenti ce jour-l√†.</p>
                <textarea name="titre_debut" placeholder="Si on se rencontrait aujourd'hui..." required></textarea>
                
                <div class="file-upload">
                    <label for="photo_input" class="custom-file-upload">
                        <span>üì∏ Choisir notre plus belle photo</span>
                    </label>
                    <input type="file" id="photo_input" accept="image/*" required>
                    <input type="hidden" name="photo_base64" id="photo_base64"> 
                    <div id="preview-container"></div>
                </div>
            </section>

            <section class="step" data-step="2">
                <span class="step-number">02</span>
                <h2>Vos moments grav√©s</h2>
                <p>Trois souvenirs, trois flashs de votre histoire.</p>
                <div class="input-group">
                    <input type="text" name="souvenir_1" placeholder="Un moment fort..." required>
                    <input type="text" name="souvenir_2" placeholder="Un fou rire..." required>
                    <input type="text" name="souvenir_3" placeholder="Une √©preuve surmont√©e..." required>
                </div>
            </section>

            <section class="step" data-step="3">
                <span class="step-number">03</span>
                <h2>Le test de complicit√©</h2>
                <p>Une question pour la faire sourire ou r√©fl√©chir.</p>
                <input type="text" name="question_jeu" placeholder="Ta question (ex: Quel est notre resto ?)" required>
                <input type="text" name="reponse_jeu" placeholder="La r√©ponse attendue" required>
            </section>

            <section class="step" data-step="4">
                <span class="step-number">04</span>
                <h2>Le message final</h2>
                <p>Ouvre ton c≈ìur. Ce texte ne sera r√©v√©l√© qu'apr√®s son clic.</p>
                <textarea name="message_final" placeholder="Je t'aime parce que..." required style="font-family: 'Dancing Script', cursive; font-size: 1.2rem;"></textarea>
                
                <label class="mt-3">üìÖ Date de d√©verrouillage :</label>
                <input type="date" name="date_ouverture" required>

                <div class="audio-upload mt-4 p-3" style="background: rgba(255,255,255,0.05); border-radius: 15px; border: 1px dashed rgba(255,255,255,0.2);">
                    <label style="cursor: pointer; display: block;">
                        <span>üé§ Ajouter un message vocal (Optionnel)</span>
                        <input type="file" id="audio_input" accept="audio/*" style="display:none;">
                    </label>
                    <input type="hidden" name="audio_base64" id="audio_base64">
                    <div id="audio-status" style="font-size: 0.8rem; color: #e63946; margin-top: 5px;"></div>
                </div>
            </section>

            <div class="nav-buttons">
                <button type="button" id="prevBtn" class="btn-secondary" style="display:none;">Retour</button>
                <button type="button" id="nextBtn" class="btn-primary">Continuer</button>
                <button type="submit" id="submitBtn" class="btn-primary" style="display:none;">G√©n√©rer l'Instant ‚ù§Ô∏è</button>
            </div>
        </form>
    </main>

    <div id="successModal" class="modal">
        <div class="modal-content">
            <div class="success-icon">üåπ</div>
            <h3>C'est pr√™t !</h3>
            <p>Voici le lien unique √† lui envoyer :</p>
            <div class="link-box">
                <span id="generatedLink">G√©n√©ration du lien...</span>
                <button onclick="copyLink()">Copier</button>
            </div>
            <a href="index.html" class="close-btn">Retour √† l'accueil</a>
        </div>
    </div>

    <script src="assets/js/script-google.js"></script>
    <script>
        // Petite aide visuelle pour l'audio
        document.getElementById('audio_input').addEventListener('change', function(e) {
            const status = document.getElementById('audio-status');
            if (e.target.files.length > 0) {
                status.innerText = "‚úÖ Message vocal enregistr√© !";
            }
        });
    </script>
</body>
</html>
